{% extends "base.html" %}
{% block content %}
<section class="hero-panel p-4 p-md-5 rounded-4 mb-4">
  <div class="d-flex flex-wrap justify-content-between gap-3 align-items-start">
    <div>
      <p class="text-uppercase small mb-2 fw-semibold text-secondary" style="letter-spacing: 0.08em;">Channel</p>
      <h1 class="display-6 fw-semibold text-white mb-2">{{ channel.name }}</h1>
      <div class="d-flex flex-wrap align-items-center gap-2 text-secondary">
        <span class="badge {% if channel.visibility == 'private' %}badge-soft{% else %}bg-primary{% endif %} text-uppercase">
          {{ channel.visibility }} channel
        </span>
        <span class="small">Page {{ pagination.page }} Â· {{ pagination.total_events }} events</span>
      </div>
    </div>
    <a class="btn btn-outline-light" href="/">Back to homepage</a>
  </div>
</section>

<div class="p-4 bg-white border rounded-3 shadow-sm">
  {% if events %}
  <div class="list-group list-group-flush">
    {% for event in events %}
    <div class="list-group-item px-0">
      <div class="d-flex flex-wrap justify-content-between align-items-start gap-3">
        <div>
          <a class="fw-semibold text-decoration-none text-reset" href="/e/{{ event.id }}">{{ event.title }}</a>
          <div class="text-muted small">{{ event.location or 'Location TBD' }}</div>
        </div>
        <div
          class="text-end js-event-time"
          data-event-utc="{{ event.start_time.isoformat(timespec='seconds') }}Z"
        >
          <div class="fw-semibold js-event-absolute">{{ event.start_time.strftime('%Y-%m-%d %H:%M') }}</div>
          <div class="text-muted small js-event-relative" data-placeholder="Calculating...">{{ event.start_time|relative_time }}</div>
          {% if event.end_time %}
          <div class="text-muted small">Duration: {{ event.start_time|duration(event.end_time) }}</div>
          {% endif %}
        </div>
        <div class="text-end">
          {% if event.is_private %}
          <span class="badge bg-warning text-dark">Private</span>
          {% else %}
          <span class="badge bg-success">Public</span>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="text-muted mb-0">No events currently live in this channel.</p>
  {% endif %}

  {% if pagination.total_pages > 1 %}
  <nav class="mt-4" aria-label="Channel pagination">
    <ul class="pagination mb-0">
      <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
        <a class="page-link" href="?page={{ pagination.prev_page or pagination.page }}">Previous</a>
      </li>
      <li class="page-item disabled">
        <span class="page-link">Page {{ pagination.page }} of {{ pagination.total_pages }}</span>
      </li>
      <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
        <a class="page-link" href="?page={{ pagination.next_page or pagination.page }}">Next</a>
      </li>
    </ul>
  </nav>
  {% endif %}
</div>
{% endblock %}
