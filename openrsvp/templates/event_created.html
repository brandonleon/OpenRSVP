{% extends "base.html" %}
{% block content %}
{% set admin_url = request.url_for('event_admin', event_id=event.id, admin_token=event.admin_token) %}
{% set event_url = request.url_for('event_page', event_id=event.id) %}
{% if event.channel %}
{% if event.channel.visibility == 'private' %}
{% set channel_url = request.url_for('channel_page_private', slug=event.channel.slug) %}
{% else %}
{% set channel_url = request.url_for('channel_page', slug=event.channel.slug) %}
{% endif %}
{% endif %}
<section class="hero-panel p-4 p-md-5 rounded-4 mb-4">
  <div class="d-flex flex-wrap align-items-center justify-content-between gap-3">
    <div>
      <p class="text-uppercase small mb-2 fw-semibold text-secondary" style="letter-spacing: 0.08em;">Event created</p>
      <h1 class="display-6 fw-semibold text-white mb-2">Save your links</h1>
      <div class="text-secondary small">Admin stays private; share the public RSVP link with guests.</div>
    </div>
    <a class="btn btn-outline-light" href="/">Back to homepage</a>
  </div>
</section>
<div class="row g-4">
  <div class="col-lg-6">
    <div class="p-4 card-flush rounded-3 shadow-sm h-100 border border-warning border-opacity-50">
      <h3 class="h6 text-uppercase text-warning mb-2">Private admin link</h3>
      <p class="small text-secondary">Keep this secret. It grants full control over the event.</p>
      <div class="alert alert-warning mb-3">
        <a href="{{ admin_url }}">{{ admin_url }}</a>
      </div>
      <a class="btn btn-outline-light w-100 mb-2" href="{{ admin_url }}">Open Admin Page</a>
      <div class="small text-secondary">Anyone with this link can delete or edit the event.</div>
    </div>
  </div>
  <div class="col-lg-6">
    <div class="p-4 bg-white border rounded-3 shadow-sm h-100">
      <h3 class="h6 text-uppercase text-muted mb-2">Public RSVP link</h3>
      <p class="small text-muted">Share this with guests so they can RSVP.</p>
      <div class="alert alert-success mb-3">
        <a href="{{ event_url }}">{{ event_url }}</a>
      </div>
      <a class="btn btn-success w-100" href="{{ event_url }}">View Event Page</a>
    </div>
  </div>
</div>
<div class="mt-4">
  {% if channel_url %}
  <div class="alert alert-info mb-3">
    <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
      <div>
        <strong>Channel:</strong> {{ event.channel.name }}
        <span class="badge {% if event.channel.visibility == 'private' %}bg-dark{% else %}bg-primary{% endif %} ms-2 text-uppercase">
          {{ event.channel.visibility }}
        </span>
      </div>
      <a class="btn btn-outline-info btn-sm" href="{{ channel_url }}">Open channel page</a>
    </div>
    <small class="text-muted d-block mt-2">Share this only if you want guests browsing other events in the same channel.</small>
  </div>
  {% endif %}
  <a class="btn btn-secondary" href="/">Back to homepage</a>
</div>
<div
  class="d-none"
  data-event-admin-token
  data-event-id="{{ event.id }}"
  data-admin-token="{{ event.admin_token }}"
></div>
{% endblock %}
